#
# THIS SOFTWARE IS SUBJECT TO COPYRIGHT PROTECTION AND IS OFFERED ONLY
# PURSUANT TO THE 3DFX GLIDE GENERAL PUBLIC LICENSE. THERE IS NO RIGHT
# TO USE THE GLIDE TRADEMARK WITHOUT PRIOR WRITTEN PERMISSION OF 3DFX
# INTERACTIVE, INC. A COPY OF THIS LICENSE MAY BE OBTAINED FROM THE 
# DISTRIBUTOR OR BY CONTACTING 3DFX INTERACTIVE INC(info@3dfx.com). 
# THIS PROGRAM IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER 
# EXPRESSED OR IMPLIED. SEE THE 3DFX GLIDE GENERAL PUBLIC LICENSE FOR A
# FULL TEXT OF THE NON-WARRANTY PROVISIONS.  
# 
# USE, DUPLICATION OR DISCLOSURE BY THE GOVERNMENT IS SUBJECT TO
# RESTRICTIONS AS SET FORTH IN SUBDIVISION (C)(1)(II) OF THE RIGHTS IN
# TECHNICAL DATA AND COMPUTER SOFTWARE CLAUSE AT DFARS 252.227-7013,
# AND/OR IN SIMILAR OR SUCCESSOR CLAUSES IN THE FAR, DOD OR NASA FAR
# SUPPLEMENT. UNPUBLISHED RIGHTS RESERVED UNDER THE COPYRIGHT LAWS OF
# THE UNITED STATES.  
# 
# COPYRIGHT 3DFX INTERACTIVE, INC. 1999, ALL RIGHTS RESERVED

!if "$(FX_GLIDE_HW)" == "sst96"
GLIDE_SRC_BASE  =       sst1
!else
GLIDE_SRC_BASE  =       $(FX_GLIDE_HW)
!endif
LCINCS          =       $(LCINCS) -I$(BUILD_ROOT)\$(GLIDE_SRC_BASE)\include \
                        -I$(BUILD_ROOT)\$(GLIDE_SRC_BASE)\glide\src

!if "$(DEBUG)" == "1"
LCDEFS		=	-DDEBUG=1
!endif

CFILES 		=       oeminit.c
RCFILE          =       oeminit.rc
HEADERS 	=       oeminit.h
PRIVATE_HEADERS =	rcver.h
LIBRARIES 	=       fxoem2x.lib

INSTALL_DESTINATION =   $(BUILD_ROOT)\$(GLIDE_SRC_BASE)

# Make a static link library for things like the diags.
!if "$(FX_DLL_BUILD)" == "1"
FX_DLL_LIBRARY  =       1
!else
LCDEFS          =       $(LCDEFS) -DFX_STATIC_BUILD
!endif

LCDEFS          =       $(LCDEFS)

!include $(BUILD_ROOT)\swlibs/include/nmake/3dfx.mak

!if "$(FX_TARGET)" == "WIN32"
!if "$(FX_DLL_BUILD)" != ""
fxoem2x.dll:
!endif
!endif

fxbldno.exe: fxbldno.c $(HEADERS) $(PRIVATE_HEADERS)
	$(CC) -o $@ fxbldno.c $(GCDEFS) $(LCDEFS) $(VCDEFS) $(LCOPTS) $(LDFLAGS)

fxbldno.h: fxbldno.exe
        fxbldno > fxbldno.h

oeminit.res: rcver.h fxbldno.h
